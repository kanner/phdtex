phdtex
======

Шаблон диссертации, более или менее соответствующий требованиям
российского ГОСТ Р 7.0.11-2011 (текст диссертации, автореферат).

Read this in other languages:
[English](https://github.com/kanner/phdtex/blob/master/README.en.md).

## Что это за проект?

Проект подготовлен во время написания моей кандидатской диссертации и
актуален на текущий момент в 2017 году, но я не гарантирую его
**полноценное** соответствие требованиям ГОСТ Р 7.0.11-2011
(сомневаюсь, что это вообще можно гарантировать на 100%). Проект
вдохновлен другим творением &ndash;
[Russian-Phd-LaTeX-Dissertation-Template](https://github.com/AndreyAkinshin/Russian-Phd-LaTeX-Dissertation-Template)
(всё, что до коммита
[703e978](https://github.com/AndreyAkinshin/Russian-Phd-LaTeX-Dissertation-Template/commit/703e978ce7214d4557a710c34f4f2f216292d387)),
но, в отличие от него, имеет другой принцип лицензирования (см. раздел
Лицензии ниже), так как оригинальный проект не имеет OSS лицензии ни
сейчас (CC-BY-4.0 не совсем каноническая OSS лицензия), ни на коммите,
указанном выше.

## Структура проекта

* **./**: основные данные и файлы для сборки
  * файлы-данные: информация об авторе, титульный лист, главы,
    заключение
  * файлы для сборки: dissertation, synopsis, booklet (для
    автореферата)
  * Makefile-ы (shell- и batch-based скрипты для Linux и Windows)
* **./contrib**: основные файлы шаблона
  * подключаемые пакеты и правила именования (частично специфичны для
    русского языка)
  * оглавление
  * стили (включая отдельный файл со стилями по ГОСТ)
  * bst-стиль и скрипт сортировки списка литературы (по требованиям
    ГОСТ 7.1-2003 + 7.0.11-2011)
* **./externals**: скрипты установки шрифта pscyr, оригинальный проект
    (подмодуль git)
* **./images**: каталог с используемыми изображениями
* **./parts**: дополнительные файлы, используемые в тексте диссертации
  * приложения
  * примеры баз с библиографией (отдельно для
    обычных/[ВАК](http://vak.ed.gov.ru/)/[Scopus](https://www.elsevier.com/solutions/scopus/content)
    статей, с подсчетом печатных листов)
  * заглушки для введения (отдельно для текста диссертации и
    автореферата)
  * списки: рисунков/таблиц, использованных сокращений и обозначений
* **./synopsis-parts**: основные данные и шаблонные файлы для
    автореферата
  * титульный лист автореферата
  * основное содержание
  * основные результаты работы
  * список публикаций автора

## Требования для сборки

Проект можно использовать как в среде Windows, так и в Linux, предварительно установив как минимум два пакета ПО:
* [_texlive_](https://www.tug.org/texlive/) (проверялось на версиях
  2014-2016);
* шрифт _pscyr_ (см. скрипты установки в _./externals_).

Для Windows есть еще две необходимые зависимости:
* [_GitHub_](https://desktop.github.com/) клиент (или нативно
  установленный perl для выполнения `Makefile.bat`);
* _powershell_ для `externals/pscyr-install.bat`.

Для Linux можно дополнительно использовать утилиту _make_ и
предоставляемый Makefile (см. ниже). Для проверки орфографии (`make
spell`; `make spelltmpl`, `make spelldata`) должен быть установлен
пакет _aspell_.

## Копирование проекта и сборка

Для клонирования репозитория с автоматической синхронизацией подмодуля
можно использовать команду:
```
git clone --recursive https://github.com/kanner/phdtex.git
```
а для уже клонированного репозитория нужно выполнить:
```
git submodule update --init --recursive
```

Для сборки проекта можно либо вручную запускать `pdflatex`, либо
использовать `Makefile.bat` в среде Windows, а также `make` в Linux
без опций или указывая следующие цели для сборки:
* `make` или `make all` &ndash; собрать dissertation.pdf,
  synopsis.pdf, booklet.pdf
* `make dissertation` &ndash; собрать только dissertation.pdf
* `make synopsis` &ndash; собрать synopsis.pdf (предварительно
  соберется dissertation.pdf для указания номеров страниц в положениях
  из введения)
* `make booklet` &ndash; собрать booklet.pdf (предварительно соберется
  исходный synopsis.pdf)
* `make spell` &ndash; проверка орфографии для всех файлов
* `make spelltmpl` &ndash; проверка орфографии для файлов шаблона
* `make spelldata` &ndash; проверка орфографии для файлов с данными
* `make clean` &ndash; очистить все временные и результирующие файлы

Процесс сборки состоит из нескольких итераций вызова `pdflatex` (4 для
текста диссертации и 3 для автореферата) в комбинации с `bibtex` и
`makeindex` для корректной сборки библиографических записей и списка
сокращений. Опыты показали, что это оптимальное решение для избежания
ошибок в результирующих документах, хотя процесс сборки и длится
достаточно долго. В среде Linux для ускорения сборки проекта можно
использовать команды выше в виде `make TARGET -jN` (где значение _N_
лучше сделать равным _(количество ядер CPU) + 1_), все зависимости
_TARGET_ при этом должны быть корректно разрешены (synopsis не начнет
собираться параллельно dissertation и т.п.).

## Использование проекта в качестве шаблона

Вы можете сделать fork проекта и вносить изменения в его оригинальные
файлы. Также можно использовать проект в качестве настоящего шаблона
(например, как git submodule в каталоге _./template_ своего проекта с
диссертацией), скопировав все файлы с данными в свой новый проект и
используя такие упрощенные Makefile-ы:
* _Makefile_:
```
template = ./template/
include $(template)/Makefile
```
* _Makefile.bat_: `call template\Makefile.bat template`
* _Makefile-clean.bat_: `call template\Makefile-clean.bat template`

Чтобы использовать шаблон с [_texstudio_](http://www.texstudio.org/)
или подобными средами для верстки в latex необходимо также скопировать
в корень своего проекта файлы _dissertation.tex_, _synopsis.tex_ и
_booklet.tex_ (те, которые соответствуют ветке
[**texstudio-template**](https://github.com/kanner/phdtex/tree/texstudio-template)).

## Ограничения

В текущей версии проекта нет презентации в latex, сделанной, например,
с использованием _beamer_. Я использовал .ppt формат для презентации,
так как использование для этого latex не было изначальной целью, а
также для многих итак было уже слишком -) (к сожалению, работа с
документами в нашей стране ассоциируется в первую очередь с
.doc/.docx, а использование latex и .pdf часто вызывает сложности и
непонимание). Если Вы все равно хотите использовать latex для верстки
презентации &ndash; используйте текущую версию подмодуля из
_./externals_.

В texlive версии 2014 при сборке проекта может возникать ошибка "No
room for a new \dimen". Для исключения этой ошибки используйте при
сборке последний коммит ветки
[**texlive-2014**](https://github.com/kanner/phdtex/tree/texlive-2014)
или вручную добавьте строку `\usepackage{etex}` в
dissertation.tex/synopsis.tex сразу после строк с `\documentclass...`.

## Лицензии (смешанное лицензирование)

Основное содержание этого проекта выпущено под лицензией **MIT**
**[SPDX-License-Identifier: MIT]**, если в заголовках файлов не
указано иное. Проект должен быть использован как шаблон для
диссертации и, я считаю, представляет собой исходные коды в latex,
которые необходимо собрать/скомпилировать с помощью Makefile-ов или
вручную посредством `pdflatex`. Тем не менее, некоторые файлы имеют
лицензию **Creative Commons Attribution 4.0**
**[SPDX-License-Identifier: CC-BY-4.0]**: не относящиеся к шаблону
файлы с данными (объекты без префикса `$(template)/` в _Makefile_),
которые, если требуется, можно использовать, изменять или вообще
удалить &ndash; информация об авторе, введение, части основного текста
и автореферата, bibtex файлы и так далее. Еще два файла
(_contrib/tweaklist.sty_, _contrib/utf8gost71my.bst_) имеют лицензию
**LPPL** и были немного модифицированы мной для целей проекта
(добавлен новый блок copyright). Примеры файлов с изображениями в
каталоге _./images_ имеют лицензию **CC0**.

Таким образом, суммируя все вышесказанное, я не претендую на авторство
Ваших файлов с данным диссертации, проект необходимо использовать лишь
как шаблон, учитывая ограничения лицензий для файлов этого
шаблона. Также указанные лицензии в общем случае не распространяются
на результирующие pdf-файлы (но в случае сборки с исходными файлами
данных из проекта для них будет действовать лицензия CC-BY-4.0, как и
для самих файлов с данными), их необходимо использовать только для
оригинальных файлов из этого репозитория. Вы можете поблагодарить меня
в одном из последних разделов Вашей диссертации (раздел
Благодарности), так же как и своего научного
руководителя/консультанта, или можете не делать этого вовсе &ndash;
это Ваше право.
